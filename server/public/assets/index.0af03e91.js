var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,l)=>{for(var s in l||(l={}))n.call(l,s)&&a(e,s,l[s]);if(t)for(var s of t(l))r.call(l,s)&&a(e,s,l[s]);return e},s=(e,t,n)=>(a(e,"symbol"!=typeof t?t+"":t,n),n);import{C as c,B as o,O as i,p as m,a as u,R as d,S as p,u as E,w as f,W as h,T as g,b as y,c as v,d as x,K as N}from"./vendor.acef932a.js";import"indexof";const w=c.create({baseURL:"http://localhost:3001/api",method:"get",timeout:6e3});function b(e){const t=document.querySelector(e);return null!=t?[t.offsetWidth,t.offsetHeight]:{}}function k(e,t){return e.map(((e,n)=>t(e,n)))}function L(e){const t=u.exports.useRef(null);let[n,r]=u.exports.useState(null);const[a,s]=u.exports.useState("100vh"),[c,i]=u.exports.useState("100vw"),{CalcHeight:m,direction:p,pulldownRefresh:E=!1,options:f}=e;return u.exports.useEffect((()=>{"y"===p&&m&&s(m());const e=scroll=new o(t.current,l({observeDOM:!0},f));return()=>{e.destroy()}}),[n,a]),"y"===p?d.createElement("div",{className:"rootRef",style:{height:a},ref:t},e.children):d.createElement("div",{className:"rootRef horizontal",style:{width:c},ref:t},e.children)}o.use(i),L.propTypes={CalcHeight:m.func,direction:m.string,pulldownRefresh:m.bool,options:m.object},L.defaultProps={direction:"y",pulldownRefresh:!1,option:{}};const C=e=>d.createElement("div",{className:"loading loading--circular"},d.createElement("span",{className:"loading__spinner loading__spinner--circular",style:{color:e}},d.createElement("svg",{viewBox:"25 25 50 50",className:"loading__circular"},d.createElement("circle",{style:{stroke:e},cx:"50",cy:"50",r:"20",fill:"none"}))));function _(e){const{color:t="#c9c9c9",message:n="加载中...",textColor:r="#c9c9c9"}=e;return d.createElement("div",{className:"loadingContainer"},d.createElement(C,{color:t}),d.createElement("p",{style:{color:r}},n))}function D(e){const t=u.exports.useRef(null),{currentPageIndex:n,slider:r,computedClassName:a}=function(e){let[t,n]=u.exports.useState(null);const[r,a]=u.exports.useState(0);return u.exports.useEffect((()=>{console.log(e.current);const n=new o(e.current,{click:!0,scrollX:!0,scrollY:!1,momentum:!1,bounce:!1,probeType:3,slide:!0});return t=n,n.on("slideWillChange",(e=>{a(e.pageX)})),()=>{n.destroy()}}),[]),{slider:t,currentPageIndex:r,computedClassName:function(e){return r===e?"active dot":"dot"}}}(t),{sliders:l}=e;return d.createElement("div",{className:"slider",ref:t},d.createElement("div",{className:"slider-group"},k(l,((e,t)=>d.createElement("div",{key:t,className:"slider-page"},d.createElement("a",null,d.createElement("img",{src:e})))))),d.createElement("div",{className:"dots-wrapper"},k(l,((e,t)=>d.createElement("span",{key:t,className:a(t)})))))}function R(){const[e,t]=u.exports.useState([]);return function(e){const[t,n]=u.exports.useState(e);u.exports.useMemo((()=>({display:t?"block":"none"})),[t])}(!1),console.log("effect"),u.exports.useEffect((()=>{e.length})),0!==e.length?d.createElement("div",{className:"bannerWrap"},d.createElement("div",{className:"banner-content "},d.createElement(D,{sliders:e}))):d.createElement(_,null)}o.use(p),D.propsTypes={sliders:m.array};const $="empty-network-",S=(e,t,n)=>d.createElement("stop",{"stop-color":e,offset:`${t}%`,"stop-opacity":n});const F=["error","search","default"];function T(e){let{imageSize:t=120,description:n="数据为空",image:r}=e;const a=t=>{const n=e.children;return n?n&&!Array.isArray(n)?e.children:n.find((e=>e.props.name===t)):null};return d.createElement("div",{className:"empty"},d.createElement("div",{className:"image",style:{width:t+"px",height:t+"px"}},(()=>{let t=e.image;const n=a("image");return n||("network"===t?d.createElement("svg",{viewBox:"0 0 160 160"},d.createElement("defs",null,d.createElement("linearGradient",{id:`${$}1`,x1:"64.022%",y1:"100%",x2:"64.022%",y2:"0%"},S("#FFF",0,.5),S("#F2F3F5",100)),d.createElement("linearGradient",{id:`${$}2`,x1:"50%",y1:"0%",x2:"50%",y2:"84.459%"},S("#EBEDF0",0),S("#DCDEE0",100,0)),d.createElement("linearGradient",{id:`${$}3`,x1:"100%",y1:"0%",x2:"100%",y2:"100%"},S("#EAEDF0",0),S("#DCDEE0",100)),d.createElement("linearGradient",{id:`${$}4`,x1:"100%",y1:"100%",x2:"100%",y2:"0%"},S("#EAEDF0",0),S("#DCDEE0",100)),d.createElement("linearGradient",{id:`${$}5`,x1:"0%",y1:"43.982%",x2:"100%",y2:"54.703%"},S("#EAEDF0",0),S("#DCDEE0",100)),d.createElement("linearGradient",{id:`${$}6`,x1:"94.535%",y1:"43.837%",x2:"5.465%",y2:"54.948%"},S("#EAEDF0",0),S("#DCDEE0",100)),d.createElement("radialGradient",{id:`${$}7`,cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54835 0 .5 -.5)"},S("#EBEDF0",0),S("#FFF",100,0))),d.createElement("g",{fill:"none","fill-rule":"evenodd"},d.createElement("g",{opacity:".8"},d.createElement("path",{d:"M0 124V46h20v20h14v58H0z",fill:`url(#${$}1)`,transform:"matrix(-1 0 0 1 36 7)"}),d.createElement("path",{d:"M121 8h22.231v14H152v77.37h-31V8z",fill:`url(#${$}1)`,transform:"translate(2 7)"})),d.createElement("path",{fill:`url(#${$}7)`,d:"M0 139h160v21H0z"}),d.createElement("path",{d:"M37 18a7 7 0 013 13.326v26.742c0 1.23-.997 2.227-2.227 2.227h-1.546A2.227 2.227 0 0134 58.068V31.326A7 7 0 0137 18z",fill:`url(#${$}2)`,"fill-rule":"nonzero",transform:"translate(43 36)"}),d.createElement("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},d.createElement("path",{d:"M20.875 11.136a18.868 18.868 0 00-5.284 13.121c0 5.094 2.012 9.718 5.284 13.12",stroke:`url(#${$}3)`,transform:"translate(43 36)"}),d.createElement("path",{d:"M9.849 0C3.756 6.225 0 14.747 0 24.146c0 9.398 3.756 17.92 9.849 24.145",stroke:`url(#${$}3)`,transform:"translate(43 36)"}),d.createElement("path",{d:"M57.625 11.136a18.868 18.868 0 00-5.284 13.121c0 5.094 2.012 9.718 5.284 13.12",stroke:`url(#${$}4)`,transform:"rotate(-180 76.483 42.257)"}),d.createElement("path",{d:"M73.216 0c-6.093 6.225-9.849 14.747-9.849 24.146 0 9.398 3.756 17.92 9.849 24.145",stroke:`url(#${$}4)`,transform:"rotate(-180 89.791 42.146)"})),d.createElement("g",{transform:"translate(31 105)","fill-rule":"nonzero"},d.createElement("rect",{fill:`url(#${$}5)`,width:"98",height:"34",rx:"2"}),d.createElement("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.114"}),d.createElement("rect",{fill:`url(#${$}6)`,x:"15",y:"12",width:"18",height:"6",rx:"1.114"})))):(F.includes(t)&&(t=`https://img.yzcdn.cn/vant/empty-image-${t}.png`),d.createElement("img",{src:t})))})()),(()=>{if(a("description"),n)return d.createElement("p",{className:"description"},n)})(),(()=>{const e=a("bottom");if(e)return d.createElement("div",{className:"bottom"},e)})())}function z(e){const[t,n]=u.exports.useState([]),{image:r,description:a,handleError:s}=function(){const[e,t]=u.exports.useState("数据为空"),[n,r]=u.exports.useState("error");return{description:e,setDescription:t,image:n,setImage:r,handleError:function(e){e.message.includes("Network ")?(t("网络异常"),r("network")):e.message.includes("timeout")&&t("请求超时,请下拉刷新试试")}}}();u.exports.useRef(null);const{push:c}=E();let{RenderElement:o,setLoading:i,loading:m}=function(e=!0,t,n){const[r,a]=u.exports.useState(e);if("function"==typeof t||"function"==typeof action)return{setLoading:a,RenderElement:function(){return r?d.createElement(_,l({},n)):t()},loading:r}}(!0,(function(){return d.createElement(L,{direction:"x",options:{scrollX:!0}},d.createElement("div",{className:"categoryWrap"},k(t,p)))}),{});u.exports.useEffect((()=>(async function(){w("/getColumnList").then((e=>{i(!1),t.length||n(e.data)})).catch((e=>{i(!1),s(e)}))}(),()=>{console.log("clearEffect")})),[m]);const p=(e,t)=>d.createElement("div",{key:t,onClick:()=>{return t=e.cate_name,n=e.cate_id,void c(`/liveRoomList?cate_name=${t}&cate_id=${n}`);var t,n}},d.createElement("img",{src:e.pic,alt:""}),d.createElement("span",null,e.cate2Name," "));return m||t.length?d.createElement(o,null):d.createElement(T,{image:r,description:a})}class A extends u.exports.Component{constructor(){super(...arguments),s(this,"state",{LiveRoomList:[],msg:"正在加载数据..."}),s(this,"toLiveRoom",(()=>{let{history:e}=this.props;e.push("/liveroom")}))}async getLiveListData(){try{const e=this.props.tagId||0,t=this.props.cateId||0,n=this.props.api,r=await fetch("http://h5sm.com/flutter/api/"+n+"?tag_id="+e+"&cate_id="+t),{data:a}=await r.json();this.setState({LiveRoomList:a}),0===a.length&&this.setState({msg:"暂时没有数据..."})}catch(e){this.setState({msg:"数据加载失败"})}}componentDidMount(){this.getLiveListData()}render(){let{LiveRoomList:e}=this.state;return 0===e.length?d.createElement("p",{className:"message"},this.state.msg):d.createElement("div",{className:"LiveRoomList"},e.map(((e,t)=>d.createElement("div",{key:t,onClick:this.toLiveRoom},d.createElement("img",{src:e.room_src,alt:""}),d.createElement("span",{className:"onlineCount"},e.online>=1e4?(e.online/1e4).toFixed(1)+"万":e.online),d.createElement("p",{className:"nickName"},d.createElement("i",{className:"NormalRoomItem-showAnchorIcon"}),d.createElement("span",null,e.nickname)),d.createElement("div",null,d.createElement("p",null," ",e.room_name," "))))))}}var M=f(A);class H extends u.exports.Component{render(){return d.createElement("div",null,d.createElement(R,null),d.createElement(z,null),d.createElement(M,{api:"subLiveList"}))}}function I(){const[e,t]=u.exports.useState([{tag_id:"0",tag_name:"全部"},{tag_id:"1",tag_name:"推荐"}]);function n(e){const t=b(".HeaderTop")[1],n=b(".HeaderTabsWrapper .am-tabs-tab-bar-wrap")[1];return(window.screen.width,window.screen.height-t-n-20)+"px"}return u.exports.useEffect((()=>{2===e.length&&w("/cateList").then((e=>{console.log(e.data),t((t=>t.concat(e.data)))}))})),d.createElement("div",{className:"HeaderTabsWrapper"},d.createElement(h,null),d.createElement(g,{tabs:e,initialPage:1,distanceToChangeTab:.6,swipeable:!1,onTabClick:(e,t)=>{document.title=e.tag_name},renderTab:e=>d.createElement("p",null,e.tag_name)},e.map(((e,t)=>{const r="推荐"===e.tag_name?d.createElement(H,null):d.createElement(M,{key:t,tagId:e.tag_id,api:"subLiveList",cateId:e.cate_id,type:e.shortName});return d.createElement(L,{pulldownRefresh:!0,CalcHeight:n,key:t},r)}))),d.createElement(h,null))}function P(e){return d.createElement("div",{className:"HeaderTop"},d.createElement("div",{className:"logo"},"   "),d.createElement("div",{className:"search"},d.createElement("i",{className:"iconfont icon-sousuo "}),d.createElement("span",null,"搜索")),d.createElement("div",{className:"dowmloadApp"},d.createElement(y,{size:"small"}," 打开APP")))}function O(){return d.createElement("div",{className:"home"},d.createElement(P,null),d.createElement(I,null))}function W(){return d.createElement("div",{className:"App"},d.createElement(O,null))}function j(){const e=document.documentElement.clientWidth/375;document.documentElement.style.fontSize=37.5*Math.min(e,2)+"px"}j(),window.onresize=function(){console.log("我执行了"),j()},v.render(d.createElement(x,null,d.createElement(N,null,d.createElement(W,null))),document.getElementById("root"));
